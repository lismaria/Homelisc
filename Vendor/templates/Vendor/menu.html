{% extends "Vendor/base-vendor.html" %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'Vendor/menu.css' %}">
{% endblock style %}

{% block title %}Menu{% endblock title %}


{% block content %}

    <div class="menu-wrapper">
        <div class="menu-filter-frame">
            <div class="menu-filters">
                <button>
                    <h1>Price</h1>
                    <svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.71875 9.44794L12.5 14.2188L17.2812 9.44794L18.75 10.9167L12.5 17.1667L6.25 10.9167L7.71875 9.44794Z" fill="black"/>
                    </svg>
                </button>
                <button>
                    <h1 style="white-space: nowrap">A-Z</h1>
                    <svg width="25" height="26" viewBox="0 0 25 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.71875 9.44794L12.5 14.2188L17.2812 9.44794L18.75 10.9167L12.5 17.1667L6.25 10.9167L7.71875 9.44794Z" fill="black"/>
                    </svg>
                </button>
                <h1 style="color:var(--primary);text-align:center">Clear all filters</h1>
            </div>
        </div>

        <div class="itemcount-additem">
            <p>10 items in your Menu</p>
            <button class="add-item">
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.5 2.5C14.625 2.5 18 5.875 18 10C18 14.125 14.625 17.5 10.5 17.5C6.375 17.5 3 14.125 3 10C3 5.875 6.375 2.5 10.5 2.5ZM10.5 1.25C5.6875 1.25 1.75 5.1875 1.75 10C1.75 14.8125 5.6875 18.75 10.5 18.75C15.3125 18.75 19.25 14.8125 19.25 10C19.25 5.1875 15.3125 1.25 10.5 1.25Z" fill="white"/>
                    <path d="M15.5 9.375H11.125V5H9.875V9.375H5.5V10.625H9.875V15H11.125V10.625H15.5V9.375Z" fill="white"/>
                </svg>
                <h1>Add</h1>
            </button>
        </div>

        <div class="item-frame">
            {% for i in itemInfo %}
            <div class="item-card">
                <div class="item-pic">
                    <img src="" alt="" srcset="" width="100%" height="100%">                    
                    <div class="remove-item">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.80497 9L12.235 6.57C12.3169 6.47435 12.3597 6.35131 12.3548 6.22547C12.35 6.09964 12.2978 5.98027 12.2087 5.89122C12.1197 5.80217 12.0003 5.75001 11.8745 5.74515C11.7487 5.74029 11.6256 5.78309 11.53 5.865L9.09997 8.27L6.65497 5.825C6.55932 5.74309 6.43628 5.70029 6.31044 5.70515C6.1846 5.71001 6.06523 5.76217 5.97619 5.85122C5.88714 5.94027 5.83497 6.05964 5.83011 6.18547C5.82525 6.31131 5.86805 6.43435 5.94997 6.53L8.38997 9L5.99997 11.36C5.94763 11.4048 5.90512 11.46 5.8751 11.522C5.84509 11.584 5.82823 11.6516 5.82557 11.7205C5.82291 11.7893 5.83451 11.858 5.85965 11.9222C5.88479 11.9863 5.92291 12.0446 5.97164 12.0933C6.02037 12.1421 6.07864 12.1802 6.14281 12.2053C6.20697 12.2305 6.27563 12.2421 6.34449 12.2394C6.41335 12.2367 6.48092 12.2199 6.54295 12.1899C6.60498 12.1599 6.66014 12.1173 6.70497 12.065L9.08997 9.68L11.46 12.05C11.5556 12.1319 11.6787 12.1747 11.8045 12.1699C11.9303 12.165 12.0497 12.1128 12.1387 12.0238C12.2278 11.9347 12.28 11.8154 12.2848 11.6895C12.2897 11.5637 12.2469 11.4407 12.165 11.345L9.80497 9Z" fill="#964B00" stroke="var(--primary)"/>
                            <path d="M9 17C7.41775 17 5.87103 16.5308 4.55544 15.6518C3.23985 14.7727 2.21447 13.5233 1.60897 12.0615C1.00347 10.5997 0.84504 8.99113 1.15372 7.43928C1.4624 5.88743 2.22433 4.46197 3.34315 3.34315C4.46197 2.22433 5.88743 1.4624 7.43928 1.15372C8.99113 0.84504 10.5997 1.00347 12.0615 1.60897C13.5233 2.21447 14.7727 3.23985 15.6518 4.55544C16.5308 5.87103 17 7.41775 17 9C17 11.1217 16.1571 13.1566 14.6569 14.6569C13.1566 16.1571 11.1217 17 9 17ZM9 2C7.61553 2 6.26216 2.41055 5.11101 3.17972C3.95987 3.94889 3.06266 5.04214 2.53285 6.32122C2.00303 7.6003 1.86441 9.00777 2.13451 10.3656C2.4046 11.7235 3.07129 12.9708 4.05026 13.9497C5.02922 14.9287 6.2765 15.5954 7.63437 15.8655C8.99224 16.1356 10.3997 15.997 11.6788 15.4672C12.9579 14.9373 14.0511 14.0401 14.8203 12.889C15.5895 11.7379 16 10.3845 16 9C16 7.14349 15.2625 5.36301 13.9498 4.05026C12.637 2.7375 10.8565 2 9 2Z" fill="#964B00" stroke="var(--primary)"/>
                        </svg>
                    </div>
                    <div class="edit-item" data-id={{i.id}}>
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.3555 4.05599L13.944 5.64374L12.3555 4.05599ZM13.377 2.65724L9.08175 6.95249C8.85982 7.17412 8.70846 7.45648 8.64675 7.76399L8.25 9.74999L10.236 9.35249C10.5435 9.29099 10.8255 9.14024 11.0475 8.91824L15.3427 4.62299C15.4718 4.49392 15.5742 4.34069 15.6441 4.17205C15.7139 4.0034 15.7499 3.82265 15.7499 3.64012C15.7499 3.45758 15.7139 3.27683 15.6441 3.10819C15.5742 2.93955 15.4718 2.78632 15.3427 2.65724C15.2137 2.52817 15.0604 2.42578 14.8918 2.35593C14.7232 2.28608 14.5424 2.25012 14.3599 2.25012C14.1773 2.25012 13.9966 2.28608 13.8279 2.35593C13.6593 2.42578 13.5061 2.52817 13.377 2.65724V2.65724Z" stroke="var(--primary)" stroke-width="1.65254" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14.25 11.25V13.5C14.25 13.8978 14.092 14.2794 13.8107 14.5607C13.5294 14.842 13.1478 15 12.75 15H4.5C4.10218 15 3.72064 14.842 3.43934 14.5607C3.15804 14.2794 3 13.8978 3 13.5V5.25C3 4.85218 3.15804 4.47064 3.43934 4.18934C3.72064 3.90804 4.10218 3.75 4.5 3.75H6.75" stroke="var(--primary)" stroke-width="1.65254" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>                            
                    </div>
                </div>

                <div class="item-title"><p>{{i.item_name}}</p></div>
                <div class="item-descr"><p>{{i.item_descr}}</p></div>
                <div class="item-rating-price">
                    <div class="item-rating">
                        <p>{{i.item_rating}}</p>
                        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.5798 4.22554L8.68268 3.67806L6.94055 0.264101C6.89297 0.170629 6.81469 0.0949614 6.71799 0.0489671C6.47547 -0.0667604 6.18077 0.0296792 6.05951 0.264101L4.31738 3.67806L0.420236 4.22554C0.312792 4.24038 0.214557 4.28934 0.139346 4.36352C0.0484205 4.45386 -0.00168366 4.57539 4.32016e-05 4.70142C0.00177006 4.82745 0.0551867 4.94766 0.148556 5.03563L2.96819 7.69291L2.30204 11.4452C2.28642 11.5324 2.29641 11.6222 2.33088 11.7043C2.36536 11.7864 2.42293 11.8575 2.49708 11.9095C2.57123 11.9616 2.65898 11.9925 2.75039 11.9988C2.8418 12.0051 2.9332 11.9865 3.01424 11.9452L6.50003 10.1736L9.98582 11.9452C10.081 11.9941 10.1915 12.0104 10.2974 11.9926C10.5645 11.9481 10.7441 11.7033 10.698 11.4452L10.0319 7.69291L12.8515 5.03563C12.9283 4.96293 12.9789 4.86798 12.9943 4.76412C13.0357 4.50447 12.8484 4.26412 12.5798 4.22554V4.22554Z" fill="#01810E"/>
                        </svg>
                    </div>

                    <div class="item-price"><p>â‚¹ {{i.item_price}}</p></div>
                </div>
            </div>
            {% endfor %}
        </div>


    </div>

    <div class="add-item-wrapper">
        <form id="item-add-form" class="additem-form" enctype="multipart/form-data" method="post">
            {% csrf_token %}
            <label>NAME</label>{{itemForm.item_name}}
            <!-- <input type="text" placeholder="Item name"> -->

            <label>DESCRIPTION</label>{{itemForm.item_descr}}
            <!-- <textarea placeholder="Item Description"></textarea> -->

            <label>PRICE</label>{{itemForm.item_price}}
            <!-- <input type="text" placeholder="Item price"> -->

            <label>CATEGORY</label>{{itemForm.item_category}}
            <!-- <input type="text" placeholder="Category (eg. Wall Painting, Brownies,..)"> -->

            <label>IMAGES</label>{{imageForm.item_img}}
            <!-- <input type="file" id="add-itemimg" multiple style="display:none" accept="image/*"> -->
            <label class="add-itemimg" for="add-itemimg">
                <svg width="15" height="15" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 8C3 8.55 3.45 9 4 9C4.55 9 5 8.55 5 8V6H7C7.55 6 8 5.55 8 5C8 4.45 7.55 4 7 4H5V2C5 1.45 4.55 1 4 1C3.45 1 3 1.45 3 2V4H1C0.45 4 0 4.45 0 5C0 5.55 0.45 6 1 6H3V8Z" fill="black"/>
                    <path d="M13 17C14.6569 17 16 15.6569 16 14C16 12.3431 14.6569 11 13 11C11.3431 11 10 12.3431 10 14C10 15.6569 11.3431 17 13 17Z" fill="black"/>
                    <path d="M21 6H17.83L16.59 4.65C16.4036 4.44539 16.1767 4.28191 15.9235 4.16999C15.6704 4.05807 15.3968 4.00017 15.12 4H8.72C8.89 4.3 9 4.63 9 5C9 6.1 8.1 7 7 7H6V8C6 9.1 5.1 10 4 10C3.63 10 3.3 9.89 3 9.72V20C3 21.1 3.9 22 5 22H21C22.1 22 23 21.1 23 20V8C23 6.9 22.1 6 21 6ZM13 19C10.24 19 8 16.76 8 14C8 11.24 10.24 9 13 9C15.76 9 18 11.24 18 14C18 16.76 15.76 19 13 19Z" fill="black"/>
                </svg>
                <p>Add Images</p>
            </label>
            <div class="preview-images"></div>
            {% for i in shopInfo %}
            <input type="hidden" name="shopid" value="{{i.id}}">
            {% endfor %}
            <div class="additem-buttons">
                <button class="cancel-btn" type="reset">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.99996 1.66675C5.40496 1.66675 1.66663 5.40508 1.66663 10.0001C1.66663 14.5951 5.40496 18.3334 9.99996 18.3334C14.595 18.3334 18.3333 14.5951 18.3333 10.0001C18.3333 5.40508 14.595 1.66675 9.99996 1.66675ZM9.99996 16.6667C6.32413 16.6667 3.33329 13.6759 3.33329 10.0001C3.33329 6.32425 6.32413 3.33341 9.99996 3.33341C13.6758 3.33341 16.6666 6.32425 16.6666 10.0001C16.6666 13.6759 13.6758 16.6667 9.99996 16.6667Z" fill="#964B00"/>
                        <path d="M7.08337 10C7.77373 10 8.33337 9.44036 8.33337 8.75C8.33337 8.05964 7.77373 7.5 7.08337 7.5C6.39302 7.5 5.83337 8.05964 5.83337 8.75C5.83337 9.44036 6.39302 10 7.08337 10Z" fill="#964B00"/>
                        <path d="M12.9108 9.98833C13.5979 9.98833 14.155 9.4313 14.155 8.74417C14.155 8.05703 13.5979 7.5 12.9108 7.5C12.2237 7.5 11.6666 8.05703 11.6666 8.74417C11.6666 9.4313 12.2237 9.98833 12.9108 9.98833Z" fill="#964B00"/>
                        <path d="M9.99996 11.6667C7.49996 11.6667 6.66663 14.1667 6.66663 14.1667H13.3333C13.3333 14.1667 12.5 11.6667 9.99996 11.6667Z" fill="#964B00"/>
                    </svg>
                    <p>Cancel</p>
                </button>
                <button class="add-btn" type="submit">
                    <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 1.66675C5.90496 1.66675 2.16663 5.40508 2.16663 10.0001C2.16663 14.5951 5.90496 18.3334 10.5 18.3334C15.095 18.3334 18.8333 14.5951 18.8333 10.0001C18.8333 5.40508 15.095 1.66675 10.5 1.66675ZM10.5 16.6667C6.82413 16.6667 3.83329 13.6759 3.83329 10.0001C3.83329 6.32425 6.82413 3.33341 10.5 3.33341C14.1758 3.33341 17.1666 6.32425 17.1666 10.0001C17.1666 13.6759 14.1758 16.6667 10.5 16.6667Z" fill="white"/>
                        <path d="M7.58337 10C8.27373 10 8.83337 9.44036 8.83337 8.75C8.83337 8.05964 8.27373 7.5 7.58337 7.5C6.89302 7.5 6.33337 8.05964 6.33337 8.75C6.33337 9.44036 6.89302 10 7.58337 10Z" fill="white"/>
                        <path d="M13.4108 9.98833C14.0979 9.98833 14.655 9.4313 14.655 8.74417C14.655 8.05703 14.0979 7.5 13.4108 7.5C12.7237 7.5 12.1666 8.05703 12.1666 8.74417C12.1666 9.4313 12.7237 9.98833 13.4108 9.98833Z" fill="white"/>
                        <path d="M10.5 15.0001C13.8334 15.0001 14.6667 11.6667 14.6667 11.6667H6.33337C6.33337 11.6667 7.16671 15.0001 10.5 15.0001Z" fill="white"/>
                    </svg>
                    <p>Add</p>
                </button>
            </div>
        </form>
    </div>

    <div class="edit-item-wrapper"></div>

    <div class="vendor-nav">{% include "Vendor/vendor-lowernav.html" %}</div>

{% endblock content %}


{% block javascript %}
<script>
    document.getElementById("page-heading").innerHTML = "Menu";
    $(".add-item-wrapper, .edit-item-wrapper").addClass("hidden");
    $(document).ready(function () {
        $(".add-item").click(function () {
            document.getElementById("page-heading").innerHTML = "< Add Item";
            $(".menu-wrapper").addClass("hidden");
            $(".add-item-wrapper").removeClass("hidden");
        })

        $(".edit-item").click(function () {
            document.getElementById("page-heading").innerHTML = "< Edit Item";
            $(".menu-wrapper").addClass("hidden");
            $(".edit-item-wrapper").removeClass("hidden");
            id = $(this).data('id')
            console.log(id);
            editFormDiv = $(".edit-item-wrapper")
            $.ajax({
            type: 'get',
            url: "{% url 'vendor:item-edit' %}",
            content_type : 'application/json',
            data: {
                id : id
            },
            dataType: "html",
            success: function(data){
                editFormDiv.html(data);
                if($(".edit-preview-images").children().length == 3)
                    $(".edit-itemimg").hide();

                $("#remove-0").click(function() {
                    $("#imgframe-0").remove();
                    editimages();
                })
            
                $("#remove-1").click(function() {
                    $("#imgframe-1").remove();
                    editimages();
                })
            
                $("#remove-2").click(function() {
                    $("#imgframe-2").remove();
                    editimages();
                })

                $('#edit-itemimg').on("change", editimages);

                $(".cancel-btn").click(function() {
                    $(".edit-item-wrapper").addClass("hidden");
                    $(".menu-wrapper").removeClass("hidden");
                    $(".edit-item-wrapper").empty();
                    document.getElementById("page-heading").innerHTML = "Menu";
                });

                var ct=-1;
                $('.edit-item-pic').children('input').each(function () {
                    ct=ct+1;
                    $(this).attr({'id':'change-pic'+ct+''});                // "this" is the current element in the loop
                    $(this).attr({'onchange':"document.getElementById('item-pic"+ct+"').src = window.URL.createObjectURL(this.files[0])"});
                });
                
                // Edit item code
                $('#item-edit-form').submit(function(e){
                    e.preventDefault();
                    console.log("submit edit item")
                    var serializedData = new FormData($('#item-edit-form')[0]);
                    console.log($('#item-edit-form')[0])
                    console.log($('#item-edit-form'))
                    console.log(serializedData);
                
                    $.ajax({
                        type: 'POST',
                        url:"{% url 'vendor:item-edit' %}",
                        data: serializedData,
                        cache: false,
                        contentType: false,
                        processData: false,
                        success: function (response) {
                            console.log(response);
                            // var res = JSON.parse(response.instance)[0].fields.profile_pic
                            // $("#vendor_profile").attr('src','/media/'+res);
                            alert("Item Updated Successfully!");
                        },
                        error:  function (response) {
                            console.log(response);
                            alert("Failed to update");
                        }
                    })
                })
            },
            error: function(error){
                console.log("error",error);
            }
            }) 

        })

        $("#page-heading").click(function(){
            $(".add-item-wrapper, .edit-item-wrapper").addClass("hidden");
            $(".edit-item-wrapper").empty();
            $(".menu-wrapper").removeClass("hidden");
            document.getElementById("page-heading").innerHTML = "Menu";
        })


        function previewImages() 
        {
            var $preview = $('.preview-images').empty();
            if (this.files)
            {
                if(this.files.length<=3)
                    $.each(this.files, readAndPreview);
                else
                    alert("Only 3 images can be uploaded.");
            }

            function readAndPreview(i, file) 
            {
                if (!/\.(jpe?g|png|gif)$/i.test(file.name)){
                    return alert(file.name +" is not an image");
                } // else...
                var reader = new FileReader();
                $(reader).on("load", function() {
                  $preview.append($("<img/>", {src:this.result}));
                });
                reader.readAsDataURL(file);
            }     
        }
        $('#add-itemimg').attr({'multiple':true});
        $('#add-itemimg').on("change", previewImages);
        
        $(".cancel-btn").click(function() {
            $('.additem-form').trigger("reset");
            $(".add-item-wrapper").addClass("hidden");
            $(".menu-wrapper").removeClass("hidden");

            $(".edit-item-wrapper").addClass("hidden");
            $(".edit-item-wrapper").empty();
            $(".menu-wrapper").removeClass("hidden");
            document.getElementById("page-heading").innerHTML = "Menu";
        })

        // var edithtml = '<div class="edit-item-pic" id="imgframe-{{i}}">'+
        //             '<img src="" id="item-pic{{i}}" alt="" srcset="" width="100%" height="100%">'+
        //             '<input type="file" name="" id="change-pic{{i}}" style="display:none" onchange="document.getElementById("item-pic{{i}}").src = window.URL.createObjectURL(this.files[0])" accept="image/*">'+
        //             '<div class="e-remove-item" id="remove-{{i}}">'+
        //                 '<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">'+
        //                     '<path d="M9.80497 9L12.235 6.57C12.3169 6.47435 12.3597 6.35131 12.3548 6.22547C12.35 6.09964 12.2978 5.98027 12.2087 5.89122C12.1197 5.80217 12.0003 5.75001 11.8745 5.74515C11.7487 5.74029 11.6256 5.78309 11.53 5.865L9.09997 8.27L6.65497 5.825C6.55932 5.74309 6.43628 5.70029 6.31044 5.70515C6.1846 5.71001 6.06523 5.76217 5.97619 5.85122C5.88714 5.94027 5.83497 6.05964 5.83011 6.18547C5.82525 6.31131 5.86805 6.43435 5.94997 6.53L8.38997 9L5.99997 11.36C5.94763 11.4048 5.90512 11.46 5.8751 11.522C5.84509 11.584 5.82823 11.6516 5.82557 11.7205C5.82291 11.7893 5.83451 11.858 5.85965 11.9222C5.88479 11.9863 5.92291 12.0446 5.97164 12.0933C6.02037 12.1421 6.07864 12.1802 6.14281 12.2053C6.20697 12.2305 6.27563 12.2421 6.34449 12.2394C6.41335 12.2367 6.48092 12.2199 6.54295 12.1899C6.60498 12.1599 6.66014 12.1173 6.70497 12.065L9.08997 9.68L11.46 12.05C11.5556 12.1319 11.6787 12.1747 11.8045 12.1699C11.9303 12.165 12.0497 12.1128 12.1387 12.0238C12.2278 11.9347 12.28 11.8154 12.2848 11.6895C12.2897 11.5637 12.2469 11.4407 12.165 11.345L9.80497 9Z" fill="#964B00" stroke="var(--primary)"/>'+
        //                     '<path d="M9 17C7.41775 17 5.87103 16.5308 4.55544 15.6518C3.23985 14.7727 2.21447 13.5233 1.60897 12.0615C1.00347 10.5997 0.84504 8.99113 1.15372 7.43928C1.4624 5.88743 2.22433 4.46197 3.34315 3.34315C4.46197 2.22433 5.88743 1.4624 7.43928 1.15372C8.99113 0.84504 10.5997 1.00347 12.0615 1.60897C13.5233 2.21447 14.7727 3.23985 15.6518 4.55544C16.5308 5.87103 17 7.41775 17 9C17 11.1217 16.1571 13.1566 14.6569 14.6569C13.1566 16.1571 11.1217 17 9 17ZM9 2C7.61553 2 6.26216 2.41055 5.11101 3.17972C3.95987 3.94889 3.06266 5.04214 2.53285 6.32122C2.00303 7.6003 1.86441 9.00777 2.13451 10.3656C2.4046 11.7235 3.07129 12.9708 4.05026 13.9497C5.02922 14.9287 6.2765 15.5954 7.63437 15.8655C8.99224 16.1356 10.3997 15.997 11.6788 15.4672C12.9579 14.9373 14.0511 14.0401 14.8203 12.889C15.5895 11.7379 16 10.3845 16 9C16 7.14349 15.2625 5.36301 13.9498 4.05026C12.637 2.7375 10.8565 2 9 2Z" fill="#964B00" stroke="var(--primary)"/>'+
        //                 '</svg>'+
        //             '</div>'+
        //             '<label for="change-pic{{i}}" class="e-edit-item" id="edit-{{i}}">'+
        //                 '<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">'+
        //                     '<path d="M12.3555 4.05599L13.944 5.64374L12.3555 4.05599ZM13.377 2.65724L9.08175 6.95249C8.85982 7.17412 8.70846 7.45648 8.64675 7.76399L8.25 9.74999L10.236 9.35249C10.5435 9.29099 10.8255 9.14024 11.0475 8.91824L15.3427 4.62299C15.4718 4.49392 15.5742 4.34069 15.6441 4.17205C15.7139 4.0034 15.7499 3.82265 15.7499 3.64012C15.7499 3.45758 15.7139 3.27683 15.6441 3.10819C15.5742 2.93955 15.4718 2.78632 15.3427 2.65724C15.2137 2.52817 15.0604 2.42578 14.8918 2.35593C14.7232 2.28608 14.5424 2.25012 14.3599 2.25012C14.1773 2.25012 13.9966 2.28608 13.8279 2.35593C13.6593 2.42578 13.5061 2.52817 13.377 2.65724V2.65724Z" stroke="var(--primary)" stroke-width="1.65254" stroke-linecap="round" stroke-linejoin="round"/>'+
        //                     '<path d="M14.25 11.25V13.5C14.25 13.8978 14.092 14.2794 13.8107 14.5607C13.5294 14.842 13.1478 15 12.75 15H4.5C4.10218 15 3.72064 14.842 3.43934 14.5607C3.15804 14.2794 3 13.8978 3 13.5V5.25C3 4.85218 3.15804 4.47064 3.43934 4.18934C3.72064 3.90804 4.10218 3.75 4.5 3.75H6.75" stroke="var(--primary)" stroke-width="1.65254" stroke-linecap="round" stroke-linejoin="round"/>'+
        //                 '</svg>'+                          
        //             '</label>'+
        //         '</div>'

        function editimages() 
        {
            if($(".edit-preview-images").children().length < 3)
            {
                $(".edit-itemimg").show();
                if(this.files)
                {
                    var reader = new FileReader();
                    $(reader).on("load", function() {
                        $(".edit-preview-images").append($("<img/>", {src:this.result}));
                    });
                    reader.readAsDataURL(this.files[0]);
                    if($(".edit-preview-images").children().length == 2)
                        $(".edit-itemimg").hide();
                }
            }
            else
            {
                alert("Only 3 images can be uploaded.");
                $(".edit-itemimg").hide();
            }

        }
        


        
        /*Add item code */
        $('#item-add-form').submit(function(e){
            e.preventDefault();
            console.log("submit add item")
            var serializedData = new FormData($('#item-add-form')[0]);
            console.log($('#item-add-form')[0])
            console.log($('#item-add-form'))
            console.log(serializedData);

            $.ajax({
                type: 'POST',
                url:"{% url 'vendor:item-add' %}",
                data: serializedData,
                cache: false,
                contentType: false,
                processData: false,
                success: function (response) {
                    console.log(response);
                    // var res = JSON.parse(response.instance)[0].fields.profile_pic
                    // $("#vendor_profile").attr('src','/media/'+res);
                    alert("Item Added Successfully!");
                    location.reload();
                },
                error:  function (response) {
                    console.log(response);
                    alert("Failed to add");
                }
            })
        })

        
    });
</script>
{% endblock javascript %}