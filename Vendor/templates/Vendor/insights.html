<div class="shop-info-card">
    <p class="chart-title">Keep the good work!</p>
    <div class="shop-impression">
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.5798 4.22554L8.68268 3.67806L6.94055 0.264101C6.89297 0.170629 6.81469 0.0949614 6.71799 0.0489671C6.47547 -0.0667604 6.18077 0.0296792 6.05951 0.264101L4.31738 3.67806L0.420236 4.22554C0.312792 4.24038 0.214557 4.28934 0.139346 4.36352C0.0484205 4.45386 -0.00168366 4.57539 4.32016e-05 4.70142C0.00177006 4.82745 0.0551867 4.94766 0.148556 5.03563L2.96819 7.69291L2.30204 11.4452C2.28642 11.5324 2.29641 11.6222 2.33088 11.7043C2.36536 11.7864 2.42293 11.8575 2.49708 11.9095C2.57123 11.9616 2.65898 11.9925 2.75039 11.9988C2.8418 12.0051 2.9332 11.9865 3.01424 11.9452L6.50003 10.1736L9.98582 11.9452C10.081 11.9941 10.1915 12.0104 10.2974 11.9926C10.5645 11.9481 10.7441 11.7033 10.698 11.4452L10.0319 7.69291L12.8515 5.03563C12.9283 4.96293 12.9789 4.86798 12.9943 4.76412C13.0357 4.50447 12.8484 4.26412 12.5798 4.22554V4.22554Z" fill="#000"/>
        </svg>
        <h2 id="sr"></h2>
        <h3>Shop Rating</h3>
        <p>(Calculated on basis of shop and item reviews)</p>
    </div>
</div>

<div class="shop-info-card">
    <p class="chart-title">Shop impressions</p>
    <div class="shop-impression-wrapper">
        <div class="shop-impression">
            <h2 id="wc"></h2>
            <h3>Wishlist Count</h3>
            <p>(Number of users who saved your shop in their wishlist)</p>
        </div>
        <p></p>
        <div class="shop-impression">
            <h2 id="vc">32</h2>
            <h3>Visit Count</h3>
            <p>(Number of people who visited your shop)</p>
        </div>
    </div>
</div>

<div class="shop-info-card">
    <p class="chart-title">Shop Rating over 1 Week</p>
    <div class="chart-wrap" style="position: relative; min-height:250px; max-height:250px">
        <canvas id="shopR-AreaChart"></canvas>
    </div>
</div>

<div class="shop-info-card">
    <div class="chart-wrap">
        <p class="chart-title">Shop Rating</p>
        <canvas id="shopR-PieChart" style="max-height:300px"></canvas>
    </div>
</div>

<div class="shop-info-card">
    <p class="chart-title">Item Wishlist vs Visit Count</p>
    <div style="width: 100%; overflow-x: auto; overflow-y: hidden">
        <div id="dynwidth" style="min-width: 300px;">
            <canvas id="item-wish-click" height="300" width="0" style="max-height: 300px;"></canvas>
        </div>
    </div>
</div>

<div class="shop-info-card">
    <p class="chart-title">Item Rating</p>
    <div style="width: 100%; overflow-x: auto; overflow-y: hidden">
        <div id="dynRatingWidth" style="min-width: 300px;">
            <canvas id="item-rating" height="300" width="0" style="max-height: 300px;"></canvas>
        </div>
    </div>
</div>

<button class="print-btn">
    <h2>Print</h2>
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M14.7656 4.50352V0.5625H3.23438V4.50352C2.514 4.54044 1.83525 4.85239 1.33812 5.37504C0.840978 5.89768 0.563356 6.59118 0.5625 7.3125V14.0625H2.95312V12.9375H1.6875V7.3125C1.688 6.8651 1.86595 6.43617 2.18231 6.11981C2.49867 5.80345 2.9276 5.6255 3.375 5.625H14.625C15.0724 5.6255 15.5013 5.80345 15.8177 6.11981C16.134 6.43617 16.312 6.8651 16.3125 7.3125V12.9375H14.7656V14.0625H17.4375V7.3125C17.4366 6.59118 17.159 5.89768 16.6619 5.37504C16.1647 4.85239 15.486 4.54044 14.7656 4.50352ZM13.6406 4.5H4.35938V1.6875H13.6406V4.5Z" fill="white"/>
        <path d="M13.9219 7.03125H15.0469V8.15625H13.9219V7.03125Z" fill="white"/>
        <path d="M4.07812 9.28125H2.67188V10.4062H4.07812V17.4375H13.6406V10.4062H15.0469V9.28125H4.07812ZM12.5156 16.3125H5.20312V10.4062H12.5156V16.3125Z" fill="white"/>
    </svg>                                              
</button>

<script type="">

    {% if shoplinechart %}

    const shopRAreactx = document.getElementById('shopR-AreaChart').getContext('2d');
    const shopRAreaChart = new Chart(shopRAreactx, {
        type: 'line',
        data: {
            labels: {{date_list|safe}},
            datasets: [{
                label: 'Shop Rating',
                data: {{rating_list|safe}},
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 1,
                fill: 'start',
                tension: 0.1
            }]
        },
        hoverOffset: 4,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                },
                filler: {
                    propagate: false,
                },
                interaction: {
                    intersect: false,
                    }
            },
            scales: { 
                x: { 
                    ticks: { 
                        font: { 
                            size: 10,
                        }
                    } 
                },
                y:{
                    max: 5,
                    min: 0,
                    ticks: {
                        stepSize: 1
                    }
                }

            } 
        }
    });

    {% endif %}


    {% if shopratingpie %}

    const shopRPiectx = document.getElementById('shopR-PieChart').getContext('2d');
    const shopRPieChart = new Chart(shopRPiectx, {
        type: 'doughnut',
        data: {
            labels: ['5 stars', '4 stars', '3 stars', '2 stars', '1 stars'],
            datasets: [{
                label: 'Shop Rating PieChart',
                data: {{shopRatingPie|safe}},
                backgroundColor: [
                    'rgba(36, 150, 63, 0.3)',
                    'rgba(55, 255, 75, 0.3)',
                    'rgba(244, 233, 16, 0.3)',
                    'rgba(255, 102, 34, 0.3)',
                    'rgba(218, 0, 0, 0.3)',
                ],
                borderColor: [
                    'rgba(36, 150, 63, 1)',
                    'rgba(55, 255, 75, 1)',
                    'rgba(233, 181, 1, 1)',
                    'rgba(255, 102, 34, 1)',
                    'rgba(218, 0, 0, 1)',
                ],
                borderWidth: 1
            }]
        },
        hoverOffset: 4,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'right',
                },
                // title: {
                //     display: true,
                //     text: 'Shop Rating Doughnut Chart',
                //     color: 'rgba(0,0,0,1)',
                //     font: {
                //         size: 14,
                //         family: 'Poppins'
                //     }
                // }
            }
        },
    });

    {% endif %}

    {% if itemwishclick %}

    const itemwishctx = document.getElementById('item-wish-click').getContext('2d');
    const itemwishBarChart = new Chart(itemwishctx, {
        type: 'bar',
        data: {
            labels: {{wishclick_item_name|safe}},
            datasets: [
                {
                    label: 'Wishlist Count',
                    data: {{item_wish_count|safe}},
                    backgroundColor: "rgba(255, 119, 35, 0.2)",
                    borderColor: "rgba(255, 119, 35, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },

                {
                    label: 'Visit Count',
                    data: {{item_click_count|safe}},
                    backgroundColor: "rgba(2, 99, 255, 0.2)",
                    borderColor: "rgba(2, 99, 255, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                }
            ]
        },
        hoverOffset: 4,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    align: 'start'
                },
            },
            scales:{
                y:{
                    ticks: {
                        stepSize: 1
                    }
                }
            }
           
        }
    });

    {% endif %}

    {% if itemratingstack %}

    const itemRatingctx = document.getElementById('item-rating').getContext('2d');
    const itemRatingBarChart = new Chart(itemRatingctx, {
        type: 'bar',
        data: {
            labels: {{item_name|safe}},
            datasets: [
                {
                    label: '5',
                    data: {{item_stars_count_5|safe}},
                    backgroundColor: "rgba(36, 150, 63, 0.3)",
                    borderColor: "rgba(36, 150, 63, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },

                {
                    label: '4',
                    data: {{item_stars_count_4|safe}},
                    backgroundColor: "rgba(55, 255, 75, 0.3)",
                    borderColor: "rgba(55, 255, 75, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },

                {
                    label: '3',
                    data: {{item_stars_count_3|safe}},
                    backgroundColor: "rgba(244, 233, 16, 0.3)",
                    borderColor: "rgba(233, 181, 1, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },

                {
                    label: '2',
                    data: {{item_stars_count_2|safe}},
                    backgroundColor: "rgba(255, 102, 34, 0.3)",
                    borderColor: "rgba(255, 102, 34, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },

                {
                    label: '1',
                    data: {{item_stars_count_1|safe}},
                    backgroundColor: "rgba(218, 0, 0, 0.3)",
                    borderColor: "rgba(218, 0, 0, 1)",
                    borderWidth: 0.5,
                    barThickness: 10,
                },
            ]
        },
        hoverOffset: 4,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    align: 'start'
                },
            },
            scales: {
                x: {
                    stacked: true,
                },
                y: {
                    stacked: true,
                    ticks: {
                        stepSize: 1
                    }
                }
            }
           
        }
    });

    {% endif %}

    $(document).ready(function () {
        var len = {{item_click_count|length}}
        newwidth = len*30
        itemratingwidth = len*15
        $('#dynwidth').css({'width':newwidth, height: '300px'});
        $('#dynRatingWidth').css({'width':itemratingwidth, height: '300px'})        
    })
</script>